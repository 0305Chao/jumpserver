{% load static %}
<html>
  <body style="margin: 0">
    {% block includes %}
    <script type="text/javascript" src="{% static 'js/jquery-2.1.1.js' %}" ></script>
    <script type="text/javascript" src="{% static 'js/jquery-ui-1.10.4.min.js' %}"></script>
    <link rel="stylesheet" type="text/css" media="screen" href="{% static 'css/plugins/elfinder/css/elfinder.min.css' %}">
     <link rel="stylesheet" type="text/css" media="screen" href="{% static 'css/plugins/elfinder/css/theme-gray.css' %}">
    <script type="text/javascript" src="{% static 'js/plugins/elfinder/elfinder.full.js' %}"></script>
    {% endblock includes %}

    {% block elfinder_init %}
    <script type="text/javascript" charset="utf-8">
        $().ready(function() {
        var elf = $('#elfinder').elfinder({
            cssAutoLoad: ['{% static 'css/plugins/elfinder/css/theme-gray.min.css' %}'],
            url : '{% url 'filemanager:model-volume-connector' coll_id=coll_id %}',
            rememberLastDir : false,
            height : $(window).height(),
            placesFirst : false,
            resizable: false,
            requestType: 'get',
            customData : {csrfmiddlewaretoken : '{{ csrf_token }}'},
            uiOptions : {
                toolbar: [
                    ['back', 'forward'],
                    ['mkdir', 'mkfile'],
                    ['copy', 'cut', 'paste'],
                    ['rm'],
                    ['rename'],
                    ['view']
               ]
            },
            contextmenu : {
                navbar : [
                    'rm'
                ],
                cwd : [
                    'reload', 'back', '|', 'mkdir', 'mkfile', '|',
                    'upload'
                ],
                files : [
                    'rm', 'rename', 'download'
                ]
            }
        }).elfinder('instance');
        var resizeTimer;
        $(window).resize(function() {
            resizeTimer && clearTimeout(resizeTimer);
            if (! $('#elfinder').hasClass('elfinder-fullscreen')) {
                resizeTimer = setTimeout(function() {
                    var h = parseInt($(window).height());
                    if (h != parseInt($('#elfinder').height())) {
                        elf.resize('100%', h);
                    }
                }, 200);
            }
        });
        });
    </script>
    {% endblock elfinder_init %}
    <div id="elfinder" ></div>
  </body>
</html>
